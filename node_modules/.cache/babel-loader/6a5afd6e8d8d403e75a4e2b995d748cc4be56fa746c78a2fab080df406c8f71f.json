{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/TF/Desktop/hubspotTest/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/TF/Desktop/hubspotTest/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/TF/Desktop/hubspotTest/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/TF/Desktop/hubspotTest/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectDestructuringEmpty from\"C:/Users/TF/Desktop/hubspotTest/client/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty.js\";import React,{useEffect,useState}from\"react\";import{Link,useNavigate,useLocation}from\"react-router-dom\";import{useAuth}from\"../context/auth\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(_ref){_objectDestructuringEmpty(_ref);var _useState=useState({}),_useState2=_slicedToArray(_useState,2),auth=_useState2[0],setauth=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),Otp=_useState4[0],setOtp=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),Valid=_useState6[0],setValid=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),User=_useState8[0],setUser=_useState8[1];var navigate=useNavigate();var search=useLocation().search;var id=new URLSearchParams(search).get(\"id\");//event handler\nvar onChangeHandler=function onChangeHandler(e){var userOtp=e.target.value;if(userOtp){setOtp(userOtp);}};var getUserInfo=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$post,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"https://assessment.inboundacademy.in/api/user/login\",{id:id,otp:Otp});case 3:_yield$axios$post=_context.sent;data=_yield$axios$post.data;if(data){setauth(_objectSpread(_objectSpread({},auth),{},{user:data.userInfo,token:data.token}));localStorage.setItem(\"auth\",JSON.stringify(data));setValid(true);navigate(\"/home\");}else{window.alert(\"something went wrong\");navigate(\"/\");}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);window.alert(_context.t0.message);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function getUserInfo(){return _ref2.apply(this,arguments);};}();//validation\nvar userValidation=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getUserInfo();case 2:if(Valid){navigate(\"/home\");}else{// window.alert(\"please enter valid otp\");\n}case 3:case\"end\":return _context2.stop();}},_callee2);}));return function userValidation(){return _ref3.apply(this,arguments);};}();//\nvar getUserData=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var _yield$axios$post2,data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.post(\"https://assessment.inboundacademy.in/api/user/resend-otp\",{id:id});case 3:_yield$axios$post2=_context3.sent;data=_yield$axios$post2.data;if(data){setUser(data.data);}_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0.message);case 11:case\"end\":return _context3.stop();}},_callee3,null,[[0,8]]);}));return function getUserData(){return _ref4.apply(this,arguments);};}();var resendOtp=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var _yield$axios$post3,data;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return getUserData();case 2:_context4.prev=2;_context4.next=5;return axios.post(\"https://transfunnel.io/projects/hs_transfunnel/inbound_submission_api.php\",{full_name:User.name,phone:User.phone,email:User.email});case 5:_yield$axios$post3=_context4.sent;data=_yield$axios$post3.data;if(data){console.log(data);}_context4.next=13;break;case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](2);console.log(_context4.t0.message);case 13:case\"end\":return _context4.stop();}},_callee4,null,[[2,10]]);}));return function resendOtp(){return _ref5.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{class:\"otp_wraper\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"otp_form\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"logo_otp text-center\",children:/*#__PURE__*/_jsx(\"a\",{target:\"_blank\",href:\"#\",children:/*#__PURE__*/_jsx(\"img\",{width:\"170\",src:\"images/inbound-academy-logo.webp\",alt:\"Logo\"})})}),/*#__PURE__*/_jsxs(\"div\",{class:\"otp_content text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Verify Mobile\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Enter the OTP (One Time Password) Sent to +91 91525852585\"}),/*#__PURE__*/_jsx(\"input\",{onChange:onChangeHandler,value:Otp,type:\"text\",placeholder:\"Enter OTP here\",required:true}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",type:\"submit\",onClick:userValidation,children:\"VERIFY OTP\"})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"otp_resend text-center\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Check your Phone for the OTP\"}),/*#__PURE__*/_jsx(\"button\",{onClick:resendOtp,className:\"btn\",children:\"Resend OTP\"})]})]})});};export default Login;","map":{"version":3,"names":["React","useEffect","useState","Link","useNavigate","useLocation","useAuth","axios","jsx","_jsx","jsxs","_jsxs","Login","_ref","_objectDestructuringEmpty","_useState","_useState2","_slicedToArray","auth","setauth","_useState3","_useState4","Otp","setOtp","_useState5","_useState6","Valid","setValid","_useState7","_useState8","User","setUser","navigate","search","id","URLSearchParams","get","onChangeHandler","e","userOtp","target","value","getUserInfo","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$axios$post","data","wrap","_callee$","_context","prev","next","post","otp","sent","_objectSpread","user","userInfo","token","localStorage","setItem","JSON","stringify","window","alert","t0","message","stop","apply","arguments","userValidation","_ref3","_callee2","_callee2$","_context2","getUserData","_ref4","_callee3","_yield$axios$post2","_callee3$","_context3","console","log","resendOtp","_ref5","_callee4","_yield$axios$post3","_callee4$","_context4","full_name","name","phone","email","class","children","href","width","src","alt","onChange","type","placeholder","required","className","onClick"],"sources":["C:/Users/TF/Desktop/hubspotTest/client/src/components/Login.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Link, useNavigate, useLocation } from \"react-router-dom\";\r\nimport { useAuth } from \"../context/auth\";\r\nimport axios from \"axios\";\r\n\r\nconst Login = ({}) => {\r\n  const [auth, setauth] = useState({});\r\n  const [Otp, setOtp] = useState(\"\");\r\n  const [Valid, setValid] = useState(false);\r\n  const [User, setUser] = useState({});\r\n  const navigate = useNavigate();\r\n\r\n  const search = useLocation().search;\r\n  const id = new URLSearchParams(search).get(\"id\");\r\n\r\n  //event handler\r\n  const onChangeHandler = (e) => {\r\n    const userOtp = e.target.value;\r\n\r\n    if (userOtp) {\r\n      setOtp(userOtp);\r\n    }\r\n  };\r\n  const getUserInfo = async () => {\r\n    try {\r\n      const { data } = await axios.post(\r\n        \"https://assessment.inboundacademy.in/api/user/login\",\r\n        {\r\n          id: id,\r\n          otp: Otp,\r\n        }\r\n      );\r\n      if (data) {\r\n        setauth({ ...auth, user: data.userInfo, token: data.token });\r\n        localStorage.setItem(\"auth\", JSON.stringify(data));\r\n        setValid(true);\r\n        navigate(\"/home\");\r\n      } else {\r\n        window.alert(\"something went wrong\");\r\n        navigate(\"/\");\r\n      }\r\n    } catch (error) {\r\n      window.alert(error.message);\r\n    }\r\n  };\r\n\r\n  //validation\r\n  const userValidation = async () => {\r\n    await getUserInfo();\r\n    if (Valid) {\r\n      navigate(\"/home\");\r\n    } else {\r\n      // window.alert(\"please enter valid otp\");\r\n    }\r\n  };\r\n\r\n  //\r\n  const getUserData = async () => {\r\n    try {\r\n      const { data } = await axios.post(\r\n        \"https://assessment.inboundacademy.in/api/user/resend-otp\",\r\n        {\r\n          id: id,\r\n        }\r\n      );\r\n      if (data) {\r\n        setUser(data.data);\r\n      }\r\n    } catch (error) {\r\n      console.log(error.message);\r\n    }\r\n  };\r\n  const resendOtp = async () => {\r\n    await getUserData();\r\n    // console.log(User);\r\n    try {\r\n      const { data } = await axios.post(\r\n        \"https://transfunnel.io/projects/hs_transfunnel/inbound_submission_api.php\",\r\n        {\r\n          full_name: User.name,\r\n          phone: User.phone,\r\n          email: User.email,\r\n        }\r\n      );\r\n      if (data) {\r\n        console.log(data);\r\n      }\r\n    } catch (error) {\r\n      console.log(error.message);\r\n    }\r\n  };\r\n  return (\r\n    <div class=\"otp_wraper\">\r\n      <div class=\"otp_form\">\r\n        <div class=\"logo_otp text-center\">\r\n          <a target=\"_blank\" href=\"#\">\r\n            <img\r\n              width=\"170\"\r\n              src=\"images/inbound-academy-logo.webp\"\r\n              alt=\"Logo\"\r\n            />\r\n          </a>\r\n        </div>\r\n        <div class=\"otp_content text-center\">\r\n          <h3>Verify Mobile</h3>\r\n          <p>Enter the OTP (One Time Password) Sent to +91 91525852585</p>\r\n          <input\r\n            onChange={onChangeHandler}\r\n            value={Otp}\r\n            type=\"text\"\r\n            placeholder=\"Enter OTP here\"\r\n            required\r\n          />\r\n\r\n          {/* <input type=\"submit\" value=\"Verify OTP\" /> */}\r\n          <button className=\"btn\" type=\"submit\" onClick={userValidation}>\r\n            VERIFY OTP\r\n          </button>\r\n        </div>\r\n        <div class=\"otp_resend text-center\">\r\n          <p>Check your Phone for the OTP</p>\r\n          <button onClick={resendOtp} className=\"btn\">\r\n            Resend OTP\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}