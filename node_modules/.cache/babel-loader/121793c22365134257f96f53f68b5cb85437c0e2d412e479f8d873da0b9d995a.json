{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/TF/Desktop/hubspotTest/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/TF/Desktop/hubspotTest/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/TF/Desktop/hubspotTest/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/TF/Desktop/hubspotTest/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{Link,useNavigate,useLocation}from\"react-router-dom\";import{useAuth}from\"../context/auth\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),auth=_useState2[0],setauth=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),Otp=_useState4[0],setOtp=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),Valid=_useState6[0],setValid=_useState6[1];var navigate=useNavigate();var search=useLocation().search;var id=new URLSearchParams(search).get(\"id\");// const id = \"64dc96351f44ad405eddccee\";\n//event handler\nvar onChangeHandler=function onChangeHandler(e){var userOtp=e.target.value;console.log(userOtp);if(userOtp){setOtp(userOtp);}};var getUserInfo=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$post,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"https://assessment.inboundacademy.in/api/user/login\",{id:id,otp:Otp});case 3:_yield$axios$post=_context.sent;data=_yield$axios$post.data;if(data){// console.log(data);\nnavigate(\"/home\");setauth(_objectSpread(_objectSpread({},auth),{},{user:data.userInfo,token:data.token}));localStorage.setItem(\"auth\",JSON.stringify(data));setValid(true);// console.log(auth.user);\n// navigate(\"/home\");\n}else{window.alert(\"something went wrong\");navigate(\"/\");}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);window.alert(_context.t0.message);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function getUserInfo(){return _ref.apply(this,arguments);};}();//validation\nvar userValidation=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getUserInfo();case 2:if(Valid){navigate(\"/home\");}else{// window.alert(\"please enter valid otp\");\n}case 3:case\"end\":return _context2.stop();}},_callee2);}));return function userValidation(){return _ref2.apply(this,arguments);};}();useEffect(function(){},[]);return/*#__PURE__*/_jsx(\"div\",{class:\"otp_wraper\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"otp_form\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"logo_otp text-center\",children:/*#__PURE__*/_jsx(\"a\",{target:\"_blank\",href:\"#\",children:/*#__PURE__*/_jsx(\"img\",{width:\"170\",src:\"images/inbound-academy-logo.webp\",alt:\"Logo\"})})}),/*#__PURE__*/_jsxs(\"div\",{class:\"otp_content text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Verify Mobile\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Enter the OTP (One Time Password) Sent to +91 91525852585\"}),/*#__PURE__*/_jsx(\"input\",{onChange:onChangeHandler,value:Otp,type:\"text\",placeholder:\"Enter OTP here\",required:true}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",type:\"submit\",onClick:userValidation,children:\"VERIFY OTP\"})]})]})});};export default Login;","map":{"version":3,"names":["React","useEffect","useState","Link","useNavigate","useLocation","useAuth","axios","jsx","_jsx","jsxs","_jsxs","Login","_useState","_useState2","_slicedToArray","auth","setauth","_useState3","_useState4","Otp","setOtp","_useState5","_useState6","Valid","setValid","navigate","search","id","URLSearchParams","get","onChangeHandler","e","userOtp","target","value","console","log","getUserInfo","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$axios$post","data","wrap","_callee$","_context","prev","next","post","otp","sent","_objectSpread","user","userInfo","token","localStorage","setItem","JSON","stringify","window","alert","t0","message","stop","apply","arguments","userValidation","_ref2","_callee2","_callee2$","_context2","class","children","href","width","src","alt","onChange","type","placeholder","required","className","onClick"],"sources":["C:/Users/TF/Desktop/hubspotTest/client/src/components/Login.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Link, useNavigate, useLocation } from \"react-router-dom\";\r\nimport { useAuth } from \"../context/auth\";\r\nimport axios from \"axios\";\r\n\r\nconst Login = () => {\r\n  const [auth, setauth] = useState({});\r\n  const [Otp, setOtp] = useState(\"\");\r\n  const [Valid, setValid] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  const search = useLocation().search;\r\n  const id = new URLSearchParams(search).get(\"id\");\r\n  // const id = \"64dc96351f44ad405eddccee\";\r\n\r\n  //event handler\r\n  const onChangeHandler = (e) => {\r\n    const userOtp = e.target.value;\r\n    console.log(userOtp);\r\n    if (userOtp) {\r\n      setOtp(userOtp);\r\n    }\r\n  };\r\n  const getUserInfo = async () => {\r\n    try {\r\n      const { data } = await axios.post(\r\n        \"https://assessment.inboundacademy.in/api/user/login\",\r\n        {\r\n          id: id,\r\n          otp: Otp,\r\n        }\r\n      );\r\n      if (data) {\r\n        // console.log(data);\r\n        navigate(\"/home\");\r\n        setauth({ ...auth, user: data.userInfo, token: data.token });\r\n        localStorage.setItem(\"auth\", JSON.stringify(data));\r\n        setValid(true);\r\n        // console.log(auth.user);\r\n        // navigate(\"/home\");\r\n      } else {\r\n        window.alert(\"something went wrong\");\r\n        navigate(\"/\");\r\n      }\r\n    } catch (error) {\r\n      window.alert(error.message);\r\n    }\r\n  };\r\n\r\n  //validation\r\n  const userValidation = async () => {\r\n    await getUserInfo();\r\n    if (Valid) {\r\n      navigate(\"/home\");\r\n    } else {\r\n      // window.alert(\"please enter valid otp\");\r\n    }\r\n  };\r\n  useEffect(() => {}, []);\r\n  return (\r\n    <div class=\"otp_wraper\">\r\n      <div class=\"otp_form\">\r\n        <div class=\"logo_otp text-center\">\r\n          <a target=\"_blank\" href=\"#\">\r\n            <img\r\n              width=\"170\"\r\n              src=\"images/inbound-academy-logo.webp\"\r\n              alt=\"Logo\"\r\n            />\r\n          </a>\r\n        </div>\r\n        <div class=\"otp_content text-center\">\r\n          <h3>Verify Mobile</h3>\r\n          <p>Enter the OTP (One Time Password) Sent to +91 91525852585</p>\r\n          <input\r\n            onChange={onChangeHandler}\r\n            value={Otp}\r\n            type=\"text\"\r\n            placeholder=\"Enter OTP here\"\r\n            required\r\n          />\r\n\r\n          {/* <input type=\"submit\" value=\"Verify OTP\" /> */}\r\n          <button className=\"btn\" type=\"submit\" onClick={userValidation}>\r\n            VERIFY OTP\r\n          </button>\r\n        </div>\r\n        {/* <div class=\"otp_resend text-center\">\r\n          <p>Check your Email for the OTP</p>\r\n          <a href=\"#\">Resend</a>\r\n        </div> */}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}