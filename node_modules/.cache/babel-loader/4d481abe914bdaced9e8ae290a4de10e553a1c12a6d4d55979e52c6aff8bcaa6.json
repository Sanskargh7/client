{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/TF/Desktop/hubspotTest/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/TF/Desktop/hubspotTest/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/TF/Desktop/hubspotTest/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/TF/Desktop/hubspotTest/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectDestructuringEmpty from\"C:/Users/TF/Desktop/hubspotTest/client/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty.js\";import React,{useEffect,useState}from\"react\";import{Link,useNavigate,useLocation}from\"react-router-dom\";import{useAuth}from\"../context/auth\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(_ref){_objectDestructuringEmpty(_ref);var _useAuth=useAuth(),_useAuth2=_slicedToArray(_useAuth,2),auth=_useAuth2[0],setauth=_useAuth2[1];var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),Otp=_useState2[0],setOtp=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),Valid=_useState4[0],setValid=_useState4[1];var navigate=useNavigate();var search=useLocation().search;var id=new URLSearchParams(search).get(\"id\");//event handler\nvar onChangeHandler=function onChangeHandler(e){var userOtp=e.target.value;if(userOtp){setOtp(userOtp);}};var getUserInfo=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$post,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"https://assessment.inboundacademy.in/api/user/login\",{id:id,otp:Otp});case 3:_yield$axios$post=_context.sent;data=_yield$axios$post.data;if(data){console.log(data);setauth(_objectSpread(_objectSpread({},auth),{},{user:data.userInfo,token:data.token}));localStorage.setItem(\"auth\",JSON.stringify(data));setValid(true);navigate(\"/home\");}else{window.alert(\"something went wrong\");}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);window.alert(\"invalid OTP\");case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function getUserInfo(){return _ref2.apply(this,arguments);};}();//validation\nvar userValidation=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getUserInfo();case 2:if(Valid){navigate(\"/home\");}else{// window.alert(\"please enter valid otp\");\n}case 3:case\"end\":return _context2.stop();}},_callee2);}));return function userValidation(){return _ref3.apply(this,arguments);};}();var resendOtp=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var _yield$axios$post2,data,res;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.post(\"https://assessment.inboundacademy.in/api/user/resend-otp\",{id:id});case 3:_yield$axios$post2=_context3.sent;data=_yield$axios$post2.data;if(!data){_context3.next=10;break;}_context3.next=8;return axios.post(\"https://transfunnel.io/projects/hs_transfunnel/inbound_submission_api.php\",{full_name:data.data.name,phone:data.data.phone,email:data.data.email});case 8:res=_context3.sent;if(res){console.log(res);}case 10:_context3.next=15;break;case 12:_context3.prev=12;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0.message);case 15:case\"end\":return _context3.stop();}},_callee3,null,[[0,12]]);}));return function resendOtp(){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{class:\"otp_wraper\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"otp_form\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"logo_otp text-center\",children:/*#__PURE__*/_jsx(\"a\",{target:\"_blank\",href:\"#\",children:/*#__PURE__*/_jsx(\"img\",{width:\"170\",src:\"images/inbound-academy-logo.webp\",alt:\"Logo\"})})}),/*#__PURE__*/_jsxs(\"div\",{class:\"otp_content text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Verify Mobile\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Enter the OTP (One Time Password) Sent to +91 91525852585\"}),/*#__PURE__*/_jsx(\"input\",{onChange:onChangeHandler,value:Otp,type:\"text\",placeholder:\"Enter OTP here\",required:true}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",type:\"submit\",onClick:userValidation,children:\"VERIFY OTP\"})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"otp_resend text-center\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Check your Phone for the OTP\"}),/*#__PURE__*/_jsx(\"button\",{onClick:resendOtp,className:\"btn\",children:\"Resend OTP\"})]})]})});};export default Login;","map":{"version":3,"names":["React","useEffect","useState","Link","useNavigate","useLocation","useAuth","axios","jsx","_jsx","jsxs","_jsxs","Login","_ref","_objectDestructuringEmpty","_useAuth","_useAuth2","_slicedToArray","auth","setauth","_useState","_useState2","Otp","setOtp","_useState3","_useState4","Valid","setValid","navigate","search","id","URLSearchParams","get","onChangeHandler","e","userOtp","target","value","getUserInfo","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$axios$post","data","wrap","_callee$","_context","prev","next","post","otp","sent","console","log","_objectSpread","user","userInfo","token","localStorage","setItem","JSON","stringify","window","alert","t0","stop","apply","arguments","userValidation","_ref3","_callee2","_callee2$","_context2","resendOtp","_ref4","_callee3","_yield$axios$post2","res","_callee3$","_context3","full_name","name","phone","email","message","class","children","href","width","src","alt","onChange","type","placeholder","required","className","onClick"],"sources":["C:/Users/TF/Desktop/hubspotTest/client/src/components/Login.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Link, useNavigate, useLocation } from \"react-router-dom\";\r\nimport { useAuth } from \"../context/auth\";\r\nimport axios from \"axios\";\r\n\r\nconst Login = ({}) => {\r\n  const [auth, setauth] = useAuth();\r\n  const [Otp, setOtp] = useState(\"\");\r\n  const [Valid, setValid] = useState(false);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const search = useLocation().search;\r\n  const id = new URLSearchParams(search).get(\"id\");\r\n\r\n  //event handler\r\n  const onChangeHandler = (e) => {\r\n    const userOtp = e.target.value;\r\n\r\n    if (userOtp) {\r\n      setOtp(userOtp);\r\n    }\r\n  };\r\n  const getUserInfo = async () => {\r\n    try {\r\n      const { data } = await axios.post(\r\n        \"https://assessment.inboundacademy.in/api/user/login\",\r\n        {\r\n          id: id,\r\n          otp: Otp,\r\n        }\r\n      );\r\n      if (data) {\r\n        console.log(data);\r\n        setauth({ ...auth, user: data.userInfo, token: data.token });\r\n        localStorage.setItem(\"auth\", JSON.stringify(data));\r\n        setValid(true);\r\n        navigate(\"/home\");\r\n      } else {\r\n        window.alert(\"something went wrong\");\r\n      }\r\n    } catch (error) {\r\n      window.alert(\"invalid OTP\");\r\n    }\r\n  };\r\n\r\n  //validation\r\n  const userValidation = async () => {\r\n    await getUserInfo();\r\n    if (Valid) {\r\n      navigate(\"/home\");\r\n    } else {\r\n      // window.alert(\"please enter valid otp\");\r\n    }\r\n  };\r\n\r\n  const resendOtp = async () => {\r\n    try {\r\n      const { data } = await axios.post(\r\n        \"https://assessment.inboundacademy.in/api/user/resend-otp\",\r\n        {\r\n          id: id,\r\n        }\r\n      );\r\n      if (data) {\r\n        const res = await axios.post(\r\n          \"https://transfunnel.io/projects/hs_transfunnel/inbound_submission_api.php\",\r\n          {\r\n            full_name: data.data.name,\r\n            phone: data.data.phone,\r\n            email: data.data.email,\r\n          }\r\n        );\r\n        if (res) {\r\n          console.log(res);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.log(error.message);\r\n    }\r\n  };\r\n  return (\r\n    <div class=\"otp_wraper\">\r\n      <div class=\"otp_form\">\r\n        <div class=\"logo_otp text-center\">\r\n          <a target=\"_blank\" href=\"#\">\r\n            <img\r\n              width=\"170\"\r\n              src=\"images/inbound-academy-logo.webp\"\r\n              alt=\"Logo\"\r\n            />\r\n          </a>\r\n        </div>\r\n        <div class=\"otp_content text-center\">\r\n          <h3>Verify Mobile</h3>\r\n          <p>Enter the OTP (One Time Password) Sent to +91 91525852585</p>\r\n          <input\r\n            onChange={onChangeHandler}\r\n            value={Otp}\r\n            type=\"text\"\r\n            placeholder=\"Enter OTP here\"\r\n            required\r\n          />\r\n\r\n          {/* <input type=\"submit\" value=\"Verify OTP\" /> */}\r\n          <button className=\"btn\" type=\"submit\" onClick={userValidation}>\r\n            VERIFY OTP\r\n          </button>\r\n        </div>\r\n        <div class=\"otp_resend text-center\">\r\n          <p>Check your Phone for the OTP</p>\r\n          <button onClick={resendOtp} className=\"btn\">\r\n            Resend OTP\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}