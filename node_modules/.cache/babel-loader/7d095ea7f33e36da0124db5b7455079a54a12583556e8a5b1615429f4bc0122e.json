{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/TF/Desktop/Inbount/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/TF/Desktop/Inbount/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/TF/Desktop/Inbount/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/TF/Desktop/Inbount/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectDestructuringEmpty from\"C:/Users/TF/Desktop/Inbount/client/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty.js\";import React,{useEffect,useState}from\"react\";import{useNavigate,useLocation}from\"react-router-dom\";import{useAuth}from\"../context/auth\";import axios from\"axios\";import{toast}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(_ref){_objectDestructuringEmpty(_ref);var _useAuth=useAuth(),_useAuth2=_slicedToArray(_useAuth,2),auth=_useAuth2[0],setauth=_useAuth2[1];var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),Otp=_useState2[0],setOtp=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),Valid=_useState4[0],setValid=_useState4[1];var navigate=useNavigate();var search=useLocation().search;var id=new URLSearchParams(search).get(\"id\");//event handler\nvar onChangeHandler=function onChangeHandler(e){setOtp(e.target.value);};var getUserInfo=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$post,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"https://assessment.inboundacademy.in/api/user/login\",{id:id,otp:Otp});case 3:_yield$axios$post=_context.sent;data=_yield$axios$post.data;if(data.success){// console.log(data);\ntoast.success(data.userInfo.message);setauth(_objectSpread(_objectSpread({},auth),{},{user:data.userInfo,token:data.token}));localStorage.setItem(\"auth\",JSON.stringify(data));navigate(\"/home\");}else{toast.error(data.message);}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);toast.error(_context.t0.message);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function getUserInfo(){return _ref2.apply(this,arguments);};}();var resendOtp=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var _yield$axios$post2,data,res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post(\"https://assessment.inboundacademy.in/api/user/resend-otp\",{id:id});case 3:_yield$axios$post2=_context2.sent;data=_yield$axios$post2.data;if(!data){_context2.next=10;break;}_context2.next=8;return axios.post(\"https://transfunnel.io/projects/hs_transfunnel/inbound_submission_api.php\",{full_name:data.data.name,phone:data.data.phone,email:data.data.email});case 8:res=_context2.sent;if(res){setOtp(\"\");toast.success(\"OTP Resend Successfully\");}case 10:_context2.next=15;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0.message);case 15:case\"end\":return _context2.stop();}},_callee2,null,[[0,12]]);}));return function resendOtp(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{class:\"otp_wraper\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"otp_form\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"logo_otp text-center\",children:/*#__PURE__*/_jsx(\"a\",{target:\"_blank\",href:\"#\",children:/*#__PURE__*/_jsx(\"img\",{width:\"170\",src:\"images/inbound-academy-logo.webp\",alt:\"Logo\"})})}),/*#__PURE__*/_jsxs(\"div\",{class:\"otp_content text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Verify Mobile\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Please provide the OTP (One Time Password) that was sent for verification to your registered mobile number.\"}),/*#__PURE__*/_jsx(\"input\",{onChange:onChangeHandler,value:Otp,type:\"text\",placeholder:\"Enter OTP here\",required:true}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",type:\"submit\",onClick:getUserInfo,children:\"VERIFY OTP\"})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"otp_resend text-center\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Check your Phone for the OTP\"}),/*#__PURE__*/_jsx(\"button\",{onClick:resendOtp,className:\"btn\",children:\"Resend OTP\"})]})]})});};export default Login;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","useLocation","useAuth","axios","toast","jsx","_jsx","jsxs","_jsxs","Login","_ref","_objectDestructuringEmpty","_useAuth","_useAuth2","_slicedToArray","auth","setauth","_useState","_useState2","Otp","setOtp","_useState3","_useState4","Valid","setValid","navigate","search","id","URLSearchParams","get","onChangeHandler","e","target","value","getUserInfo","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$axios$post","data","wrap","_callee$","_context","prev","next","post","otp","sent","success","userInfo","message","_objectSpread","user","token","localStorage","setItem","JSON","stringify","error","t0","stop","apply","arguments","resendOtp","_ref3","_callee2","_yield$axios$post2","res","_callee2$","_context2","full_name","name","phone","email","console","log","class","children","href","width","src","alt","onChange","type","placeholder","required","className","onClick"],"sources":["C:/Users/TF/Desktop/Inbount/client/src/components/Login.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\nimport { useAuth } from \"../context/auth\";\r\nimport axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nconst Login = ({}) => {\r\n  const [auth, setauth] = useAuth();\r\n  const [Otp, setOtp] = useState(\"\");\r\n  const [Valid, setValid] = useState(false);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const search = useLocation().search;\r\n  const id = new URLSearchParams(search).get(\"id\");\r\n\r\n  //event handler\r\n  const onChangeHandler = (e) => {\r\n    setOtp(e.target.value);\r\n  };\r\n  const getUserInfo = async () => {\r\n    try {\r\n      const { data } = await axios.post(\r\n        \"https://assessment.inboundacademy.in/api/user/login\",\r\n        {\r\n          id: id,\r\n          otp: Otp,\r\n        }\r\n      );\r\n      if (data.success) {\r\n        // console.log(data);\r\n        toast.success(data.userInfo.message);\r\n        setauth({ ...auth, user: data.userInfo, token: data.token });\r\n        localStorage.setItem(\"auth\", JSON.stringify(data));\r\n\r\n        navigate(\"/home\");\r\n      } else {\r\n        toast.error(data.message);\r\n      }\r\n    } catch (error) {\r\n      toast.error(error.message);\r\n    }\r\n  };\r\n\r\n  const resendOtp = async () => {\r\n    try {\r\n      const { data } = await axios.post(\r\n        \"https://assessment.inboundacademy.in/api/user/resend-otp\",\r\n        {\r\n          id: id,\r\n        }\r\n      );\r\n      if (data) {\r\n        const res = await axios.post(\r\n          \"https://transfunnel.io/projects/hs_transfunnel/inbound_submission_api.php\",\r\n          {\r\n            full_name: data.data.name,\r\n            phone: data.data.phone,\r\n            email: data.data.email,\r\n          }\r\n        );\r\n        if (res) {\r\n          setOtp(\"\");\r\n          toast.success(\"OTP Resend Successfully\");\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.log(error.message);\r\n    }\r\n  };\r\n  return (\r\n    <div class=\"otp_wraper\">\r\n      <div class=\"otp_form\">\r\n        <div class=\"logo_otp text-center\">\r\n          <a target=\"_blank\" href=\"#\">\r\n            <img\r\n              width=\"170\"\r\n              src=\"images/inbound-academy-logo.webp\"\r\n              alt=\"Logo\"\r\n            />\r\n          </a>\r\n        </div>\r\n        <div class=\"otp_content text-center\">\r\n          <h3>Verify Mobile</h3>\r\n          {/* <p>Enter the OTP (One Time Password) Sent to +91 {auth.user.phone}</p> */}\r\n          <p>\r\n            Please provide the OTP (One Time Password) that was sent for\r\n            verification to your registered mobile number.\r\n          </p>\r\n          <input\r\n            onChange={onChangeHandler}\r\n            value={Otp}\r\n            type=\"text\"\r\n            placeholder=\"Enter OTP here\"\r\n            required\r\n          />\r\n\r\n          {/* <input type=\"submit\" value=\"Verify OTP\" /> */}\r\n          <button className=\"btn\" type=\"submit\" onClick={getUserInfo}>\r\n            VERIFY OTP\r\n          </button>\r\n        </div>\r\n        <div class=\"otp_resend text-center\">\r\n          <p>Check your Phone for the OTP</p>\r\n          <button onClick={resendOtp} className=\"btn\">\r\n            Resend OTP\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"6nBAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,WAAW,CAAEC,WAAW,KAAQ,kBAAkB,CAC3D,OAASC,OAAO,KAAQ,iBAAiB,CACzC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,KAAK,KAAQ,gBAAgB,CACtC,MAAO,uCAAuC,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE/C,GAAM,CAAAC,KAAK,CAAG,QAAR,CAAAA,KAAKA,CAAAC,IAAA,CAAW,CAAAC,yBAAA,CAAAD,IAAA,EACpB,IAAAE,QAAA,CAAwBV,OAAO,CAAC,CAAC,CAAAW,SAAA,CAAAC,cAAA,CAAAF,QAAA,IAA1BG,IAAI,CAAAF,SAAA,IAAEG,OAAO,CAAAH,SAAA,IACpB,IAAAI,SAAA,CAAsBlB,QAAQ,CAAC,EAAE,CAAC,CAAAmB,UAAA,CAAAJ,cAAA,CAAAG,SAAA,IAA3BE,GAAG,CAAAD,UAAA,IAAEE,MAAM,CAAAF,UAAA,IAClB,IAAAG,UAAA,CAA0BtB,QAAQ,CAAC,KAAK,CAAC,CAAAuB,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAAlCE,KAAK,CAAAD,UAAA,IAAEE,QAAQ,CAAAF,UAAA,IAEtB,GAAM,CAAAG,QAAQ,CAAGzB,WAAW,CAAC,CAAC,CAE9B,GAAM,CAAA0B,MAAM,CAAGzB,WAAW,CAAC,CAAC,CAACyB,MAAM,CACnC,GAAM,CAAAC,EAAE,CAAG,GAAI,CAAAC,eAAe,CAACF,MAAM,CAAC,CAACG,GAAG,CAAC,IAAI,CAAC,CAEhD;AACA,GAAM,CAAAC,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAIC,CAAC,CAAK,CAC7BX,MAAM,CAACW,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CACxB,CAAC,CACD,GAAM,CAAAC,WAAW,6BAAAC,KAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,iBAAA,CAAAC,IAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEO,CAAA3C,KAAK,CAAC4C,IAAI,CAC/B,qDAAqD,CACrD,CACEpB,EAAE,CAAEA,EAAE,CACNqB,GAAG,CAAE7B,GACP,CACF,CAAC,QAAAqB,iBAAA,CAAAI,QAAA,CAAAK,IAAA,CANOR,IAAI,CAAAD,iBAAA,CAAJC,IAAI,CAOZ,GAAIA,IAAI,CAACS,OAAO,CAAE,CAChB;AACA9C,KAAK,CAAC8C,OAAO,CAACT,IAAI,CAACU,QAAQ,CAACC,OAAO,CAAC,CACpCpC,OAAO,CAAAqC,aAAA,CAAAA,aAAA,IAAMtC,IAAI,MAAEuC,IAAI,CAAEb,IAAI,CAACU,QAAQ,CAAEI,KAAK,CAAEd,IAAI,CAACc,KAAK,EAAE,CAAC,CAC5DC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAEC,IAAI,CAACC,SAAS,CAAClB,IAAI,CAAC,CAAC,CAElDhB,QAAQ,CAAC,OAAO,CAAC,CACnB,CAAC,IAAM,CACLrB,KAAK,CAACwD,KAAK,CAACnB,IAAI,CAACW,OAAO,CAAC,CAC3B,CAACR,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAiB,EAAA,CAAAjB,QAAA,aAEDxC,KAAK,CAACwD,KAAK,CAAChB,QAAA,CAAAiB,EAAA,CAAMT,OAAO,CAAC,CAAC,yBAAAR,QAAA,CAAAkB,IAAA,MAAAvB,OAAA,gBAE9B,kBAtBK,CAAAL,WAAWA,CAAA,SAAAC,KAAA,CAAA4B,KAAA,MAAAC,SAAA,OAsBhB,CAED,GAAM,CAAAC,SAAS,6BAAAC,KAAA,CAAA9B,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAA6B,SAAA,MAAAC,kBAAA,CAAA3B,IAAA,CAAA4B,GAAA,QAAAhC,mBAAA,GAAAK,IAAA,UAAA4B,UAAAC,SAAA,iBAAAA,SAAA,CAAA1B,IAAA,CAAA0B,SAAA,CAAAzB,IAAA,SAAAyB,SAAA,CAAA1B,IAAA,GAAA0B,SAAA,CAAAzB,IAAA,SAES,CAAA3C,KAAK,CAAC4C,IAAI,CAC/B,0DAA0D,CAC1D,CACEpB,EAAE,CAAEA,EACN,CACF,CAAC,QAAAyC,kBAAA,CAAAG,SAAA,CAAAtB,IAAA,CALOR,IAAI,CAAA2B,kBAAA,CAAJ3B,IAAI,KAMRA,IAAI,EAAA8B,SAAA,CAAAzB,IAAA,WAAAyB,SAAA,CAAAzB,IAAA,SACY,CAAA3C,KAAK,CAAC4C,IAAI,CAC1B,2EAA2E,CAC3E,CACEyB,SAAS,CAAE/B,IAAI,CAACA,IAAI,CAACgC,IAAI,CACzBC,KAAK,CAAEjC,IAAI,CAACA,IAAI,CAACiC,KAAK,CACtBC,KAAK,CAAElC,IAAI,CAACA,IAAI,CAACkC,KACnB,CACF,CAAC,QAPKN,GAAG,CAAAE,SAAA,CAAAtB,IAAA,CAQT,GAAIoB,GAAG,CAAE,CACPjD,MAAM,CAAC,EAAE,CAAC,CACVhB,KAAK,CAAC8C,OAAO,CAAC,yBAAyB,CAAC,CAC1C,CAAC,QAAAqB,SAAA,CAAAzB,IAAA,kBAAAyB,SAAA,CAAA1B,IAAA,IAAA0B,SAAA,CAAAV,EAAA,CAAAU,SAAA,aAGHK,OAAO,CAACC,GAAG,CAACN,SAAA,CAAAV,EAAA,CAAMT,OAAO,CAAC,CAAC,yBAAAmB,SAAA,CAAAT,IAAA,MAAAK,QAAA,iBAE9B,kBAzBK,CAAAF,SAASA,CAAA,SAAAC,KAAA,CAAAH,KAAA,MAAAC,SAAA,OAyBd,CACD,mBACE1D,IAAA,QAAKwE,KAAK,CAAC,YAAY,CAAAC,QAAA,cACrBvE,KAAA,QAAKsE,KAAK,CAAC,UAAU,CAAAC,QAAA,eACnBzE,IAAA,QAAKwE,KAAK,CAAC,sBAAsB,CAAAC,QAAA,cAC/BzE,IAAA,MAAG0B,MAAM,CAAC,QAAQ,CAACgD,IAAI,CAAC,GAAG,CAAAD,QAAA,cACzBzE,IAAA,QACE2E,KAAK,CAAC,KAAK,CACXC,GAAG,CAAC,kCAAkC,CACtCC,GAAG,CAAC,MAAM,CACX,CAAC,CACD,CAAC,CACD,CAAC,cACN3E,KAAA,QAAKsE,KAAK,CAAC,yBAAyB,CAAAC,QAAA,eAClCzE,IAAA,OAAAyE,QAAA,CAAI,eAAa,CAAI,CAAC,cAEtBzE,IAAA,MAAAyE,QAAA,CAAG,6GAGH,CAAG,CAAC,cACJzE,IAAA,UACE8E,QAAQ,CAAEtD,eAAgB,CAC1BG,KAAK,CAAEd,GAAI,CACXkE,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,gBAAgB,CAC5BC,QAAQ,MACT,CAAC,cAGFjF,IAAA,WAAQkF,SAAS,CAAC,KAAK,CAACH,IAAI,CAAC,QAAQ,CAACI,OAAO,CAAEvD,WAAY,CAAA6C,QAAA,CAAC,YAE5D,CAAQ,CAAC,EACN,CAAC,cACNvE,KAAA,QAAKsE,KAAK,CAAC,wBAAwB,CAAAC,QAAA,eACjCzE,IAAA,MAAAyE,QAAA,CAAG,8BAA4B,CAAG,CAAC,cACnCzE,IAAA,WAAQmF,OAAO,CAAExB,SAAU,CAACuB,SAAS,CAAC,KAAK,CAAAT,QAAA,CAAC,YAE5C,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,CACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAtE,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}